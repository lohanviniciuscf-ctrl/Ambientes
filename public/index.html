<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRM</title>

<style>
:root{
  --bg:#0a192f;
  --card:#112240;
  --accent:#64ffda;
  --text:#e6f1ff;
}

body{
  margin:0;
  font-family:Segoe UI, Arial;
  background:var(--bg);
  color:var(--text);
}

button,input{
  padding:7px;
  border:none;
  border-radius:6px;
  margin:4px 0;
}

button{
  background:var(--accent);
  font-weight:bold;
  cursor:pointer;
  color:#000;
}

.center{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.box{
  background:var(--card);
  padding:20px;
  border-radius:12px;
  width:330px;
  text-align:center;
}

.hidden{display:none}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.metrics{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin:10px 0;
}

.metric{
  background:var(--card);
  padding:10px;
  border-radius:10px;
  text-align:center;
}

.lead{
  background:#fff;
  color:#000;
  padding:10px;
  border-radius:8px;
  margin:8px 0;
}

.lead button{
  padding:4px 6px;
  margin:3px;
  font-size:12px;
}
</style>
</head>

<body>

<!-- AMBIENTE -->
<div id="envSelect" class="center">
  <div class="box">
    <h3>Escolha o ambiente</h3>
    <button onclick="selectEnv('Modelle Skin')">Modelle Skin</button>
    <button onclick="selectEnv('Cia & Arte')">Cia & Arte</button>
  </div>
</div>

<!-- LOGIN -->
<div id="loginScreen" class="center hidden">
  <div class="box">
    <button onclick="backToEnv()">‚¨Ö Voltar</button>
    <h3 id="envTitle"></h3>
    <input id="user" placeholder="Usu√°rio">
    <input id="pass" type="password" placeholder="Senha">
    <button onclick="login()">Entrar</button>
    <div id="loginError"></div>
  </div>
</div>

<!-- APP -->
<div id="app" class="hidden" style="padding:15px">
<header>
  <strong id="appTitle"></strong>
  <div>
    <button onclick="logout()">Sair</button>
  </div>
</header>

<div id="metrics" class="metrics"></div>

<div id="formArea"></div>

<div id="listaPedidos"></div>
</div>

<script>
const users={
 Lohan:{pass:"D9f0da85",env:["Modelle Skin","Cia & Arte"]},
 marcus:{pass:"Elistray6001",env:["Cia & Arte"]},
 Queila:{pass:"alieuq79",env:["Modelle Skin"]}
};

let env=null,userAtual=null,pedidos=[];

function applyModelleTheme(){
 document.documentElement.style.setProperty("--bg","#f5dcc6");
 document.documentElement.style.setProperty("--card","#e2b48c");
 document.documentElement.style.setProperty("--accent","#c68642");
 document.documentElement.style.setProperty("--text","#000");
}

function selectEnv(e){
 env=e;
 envSelect.classList.add("hidden");
 loginScreen.classList.remove("hidden");
 envTitle.innerText=e;
}

function backToEnv(){
 loginScreen.classList.add("hidden");
 envSelect.classList.remove("hidden");
}

function login(){
 if(users[user.value] && users[user.value].pass===pass.value && users[user.value].env.includes(env)){
  userAtual=user.value;
  loginScreen.classList.add("hidden");
  app.classList.remove("hidden");
  appTitle.innerText=env+" ‚Äî "+userAtual;

  if(env==="Modelle Skin") applyModelleTheme();

  pedidos=JSON.parse(localStorage.getItem(env+"_"+userAtual))||[];
  render();
 }else loginError.innerText="Login inv√°lido";
}

function logout(){ location.reload(); }

function save(){
 localStorage.setItem(env+"_"+userAtual,JSON.stringify(pedidos));
}

function addPedido(){
 pedidos.push({
  id:Date.now(),
  desc:desc.value,
  valor:+valor.value,
  data:Date.now()
 });
 save();render();
}

function editPedido(id){
 const p=pedidos.find(x=>x.id===id);
 const novaDesc=prompt("Descri√ß√£o:",p.desc);
 const novoValor=prompt("Valor:",p.valor);
 if(novaDesc && novoValor){
  p.desc=novaDesc;
  p.valor=+novoValor;
  save();render();
 }
}

function delPedido(id){
 if(confirm("Excluir pedido?")){
  pedidos=pedidos.filter(p=>p.id!==id);
  save();render();
 }
}

function render(){
 metrics.innerHTML="";
 formArea.innerHTML="";
 listaPedidos.innerHTML="";

 let total=0;
 pedidos.forEach(p=>total+=p.valor);

 metrics.innerHTML=`
  <div class="metric">Pedidos<br><strong>${pedidos.length}</strong></div>
  <div class="metric">Total<br><strong>R$ ${total}</strong></div>
  <div class="metric">Comiss√£o (1%)<br><strong>R$ ${(total*0.01).toFixed(2)}</strong></div>
 `;

 formArea.innerHTML=`
  <input id="desc" placeholder="Descri√ß√£o do pedido">
  <input id="valor" type="number" placeholder="Valor">
  <button onclick="addPedido()">Adicionar Pedido</button>
 `;

 pedidos.forEach(p=>{
  const d=document.createElement("div");
  d.className="lead";
  d.innerHTML=`
   <strong>${p.desc}</strong><br>
   Valor: R$ ${p.valor}<br>
   Data: ${new Date(p.data).toLocaleDateString()}<br>
   <button onclick="editPedido(${p.id})">‚úèÔ∏è Editar</button>
   <button onclick="delPedido(${p.id})">üóë Excluir</button>
  `;
  listaPedidos.appendChild(d);
 });
}
</script>

</body>
</html>
